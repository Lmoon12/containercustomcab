<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Custom Base Cabinet | Container Custom Cabinets</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<header class="site-header">
  <div class="container nav">
    <div class="brand">
      <div class="logo"></div>
      <div class="brand-title">
        <strong>Container Custom Cabinets</strong>
        <span>Custom cabinetry - simulated checkout</span>
      </div>
    </div>

    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="product.html">Product</a>
      <a href="cart.html">Cart</a>
      <a href="checkout.html">Checkout</a>
    </div>
  </div>
</header>

<main class="container section">
  <h2>Custom Base Cabinet</h2>

  <p>Base Price (Standard 32W x 32H x 21D): <strong>$350.00</strong></p>

  <div>
    <label>Width (inches):
      <input type="number" id="width" value="32" min="18" max="48">
    </label>
  </div>

  <div>
    <label>Height (inches):
      <input type="number" id="height" value="32" min="24" max="40">
    </label>
  </div>

  <div>
    <label>Depth (inches):
      <input type="number" id="depth" value="21" min="18" max="26">
    </label>
  </div>

  <div>
    <label>Finish:
      <select id="finish">
        <option>Paint Grade</option>
        <option>Stain Grade</option>
      </select>
    </label>
  </div>

  <h3>Total Price: $<span id="price">350.00</span></h3>

  <button id="addToCart">Add to Cart</button>

  <p>
    Built to fit non-standard spaces. Ideal for custom kitchen layouts.
  </p>
</main>

<script type="module">
  import { calculatePrice } from "./pricing.js";
  import { addToCart } from "./cart-utils.js";

  const basePrice = 350;

  const rules = {
    standardSize: { w: 32, h: 32, d: 21 },
    sizeUpcharge: { perInchW: 6, perInchH: 4, perInchD: 8 },
    stainGradeUpchargeRate: 0.15
  };

  const minSize = { w: 18, h: 24, d: 18 };
  const maxSize = { w: 48, h: 40, d: 26 };

  function updatePrice() {
    const size = {
      w: document.getElementById("width").value,
      h: document.getElementById("height").value,
      d: document.getElementById("depth").value
    };

    const finish = document.getElementById("finish").value;

    const result = calculatePrice(basePrice, size, finish, rules, minSize, maxSize);
    document.getElementById("price").textContent = result.price.toFixed(2);
  }

  document.getElementById("width").addEventListener("input", updatePrice);
  document.getElementById("height").addEventListener("input", updatePrice);
  document.getElementById("depth").addEventListener("input", updatePrice);
  document.getElementById("finish").addEventListener("change", updatePrice);

  document.getElementById("addToCart").addEventListener("click", () => {
    const size = {
      w: Number(document.getElementById("width").value),
      h: Number(document.getElementById("height").value),
      d: Number(document.getElementById("depth").value)
    };

    const finish = document.getElementById("finish").value;

    const result = calculatePrice(basePrice, size, finish, rules, minSize, maxSize);

    addToCart({
      id: "base-cabinet",
      name: "Custom Base Cabinet",
      size: result.normalizedSize,
      finish: finish,
      unitPrice: result.price,
      qty: 1
    });

    window.location.href = "cart.html";
  });

  updatePrice();
</script>

</body>
</html>
